"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[95923],{593559:function(e,t,n){n.d(t,{Z:function(){return s}});var o=n(76911),i=n(124580),r=n(223815),a=n(662730),l=n(908390),c=n(515198);function s(e){var t=e.children,n=e.headingNode,s=e.heading,u=e.onDismiss,d=e.size;return(0,o.useEffect)((function(){return i.Z.pause(),function(){i.Z.resume()}}),[]),(0,c.jsx)(l.mh,{zIndex:a.C,children:(0,c.jsx)(r.Z,{allowEsc:!0,children:(0,c.jsx)(l.u_,{accessibilityModalLabel:s,heading:n||s,onDismiss:function(){i.Z.resume(),u()},role:"alertdialog",size:d||"md",padding:"none",children:t})})})}},743678:function(e,t,n){n.d(t,{Z:function(){return l}});var o=n(593559),i=n(898781),r=n(908390),a=n(515198);function l(e){var t=e.onClose,n=(0,i.ZP)();return(0,a.jsxs)(o.Z,{heading:n._('Oops! Too many login attempts', 'LoginRateLimitedModal.Modal.Heading', 'Modal heading for user who have tried to login too many times'),onDismiss:t,size:"sm",headingNode:(0,a.jsxs)(r.xu,{children:[(0,a.jsx)(r.xu,{padding:6,justifyContent:"center",display:"flex",children:(0,a.jsx)(r.JO,{icon:"pinterest",accessibilityLabel:n._('Pinterest logo', 'Accessibility label for Pinterest icon', 'Accessibility label for Pinterest icon'),color:"brandPrimary",size:40})}),(0,a.jsx)(r.X6,{align:"center",size:"500",accessibilityLevel:1,children:n._('Oops! Too many login attempts', 'LoginRateLimitedModal.Modal.Heading', 'Modal heading for user who have tried to login too many times')})]}),children:[(0,a.jsx)(r.xu,{paddingX:12,marginTop:4,marginBottom:12,children:(0,a.jsx)(r.xv,{align:"center",children:n._('You have reached the maximum number of login attempts. Try again in 30 minutes.', 'LoginRateLimitedModal.Modal.Heading', 'Modal heading for user who have tried to login too many times')})}),(0,a.jsx)(r.xu,{paddingX:12,marginBottom:8,justifyContent:"center",display:"flex",children:(0,a.jsx)(r.zx,{fullWidth:!0,color:"red",text:n._('Okay', 'LoginRateLimitedModal.Modal.OkButton', 'Okay button used to close modal'),onClick:t})})]})}},996438:function(e,t,n){n.d(t,{Z:function(){return $}});var o=n(76911),i=n(379913),r=n(803491),a=n(199324),l=n(336882),c=n(935879),s=n(910702),u=n(908390),d=n(515198);function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var o,i,r=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(o=n.next()).done)&&(r.push(o.value),!t||r.length!==t);a=!0);}catch(c){l=!0,i=c}finally{try{a||null==n.return||n.return()}finally{if(l)throw i}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function h(e){var t=e.anchor,n=e.message,i=e.children,r=p((0,o.useState)(!!n),2),a=r[0],l=r[1];return(0,o.useEffect)((function(){l(!!n)}),[n]),a&&n?(0,d.jsx)(u.J2,{anchor:t,color:"darkGray",idealDirection:"right",onDismiss:function(){return l(!0)},shouldFocus:!1,size:"md",children:(0,d.jsx)(u.xu,{column:12,padding:3,children:i?(0,d.jsx)("span",{children:i}):(0,d.jsx)("span",{dangerouslySetInnerHTML:{__html:n},style:{overflowWrap:"break-word",wordWrap:"break-word",color:"white",fontWeight:"bold"}})})}):null}var g=n(989392),_=n(290148),b=n(830269),w=n(174382),y=n(70212),v=n(85334),m=n(19121),k=n(901656),x=n(45169),C=n(905171),P=n(773285),S=n(402201),O=function(e){var t=e.onError,o=e.onEventReceived,i=e.onSuccess,r=e.rerequestFacebookEmail,a=e.viewer,l=null,c=function(e){var n=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"");if(e.origin===n&&("social-connect-complete"===e.data.type||"social-connect-error"===e.data.type)){var r=e.data;"facebook"===r.network&&(o(),clearInterval(l),"social-connect-error"===r.type?t("OTHER_ERROR"):i({type:"PROFILE",profile:r.profile}))}};if(window.addEventListener("message",c),r)n.e(51798).then(n.bind(n,107193)).then((function(e){(0,e.default)((function(e){e.login((function(e){var n;"connected"===e.status&&((null===(n=e.authResponse.grantedScopes)||void 0===n?void 0:n.split(","))||[]).includes("email")?i({type:"ACCESS_TOKEN",id:e.authResponse.userID,access_token:e.authResponse.accessToken}):t("OTHER_ERROR")}),{scope:"email",auth_type:"rerequest",return_scopes:!0})}),a)}));else{var s=(0,S.Z)(),u=window.open("/connect/facebook/","",s);u?l=setInterval((function(){u.closed&&(clearInterval(l),t("OTHER_ERROR"))}),1e3):t("POPUP_DISABLED")}return{unsubscribe:function(){window.removeEventListener("message",c)}}},A=n(898781),j=n(467570),E=n(867820),F=n(233211),L=n(584595),B=n(780280),D=n(903095);function R(e){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(n),!0).forEach((function(t){K(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function M(e,t,n,o,i,r,a){try{var l=e[r](a),c=l.value}catch(s){return void n(s)}l.done?t(c):Promise.resolve(c).then(o,i)}function T(e){return function(){var t=this,n=arguments;return new Promise((function(o,i){var r=e.apply(t,n);function a(e){M(r,o,i,a,l,"next",e)}function l(e){M(r,o,i,a,l,"throw",e)}a(void 0)}))}}function I(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function W(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function U(e,t){return(U=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=q(e);if(t){var i=q(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return H(this,n)}}function H(e,t){if(t&&("object"===R(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return G(e)}function G(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function q(e){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function K(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var X=function(e){return"PROFILE"===e.type?{facebook_id:e.profile.id}:{facebook_id:e.id,facebook_token:e.access_token}},Y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&U(e,t)}(f,e);var t,n,o,p=N(f);function f(){var e;I(this,f);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return K(G(e=p.call.apply(p,[this].concat(n))),"state",{showModal:!1}),K(G(e),"unsubscribeThisButton",null),K(G(e),"loginWithFacebook",(function(t){var n=t.facebookConnectData,o=t.isFromStatusChange,r=t.isAccountSwitch,a=t.handlePostSuccessConnect,l=t.loadingIndicatorCallback,c=e.props,s=c.checkExperiment,u=c.container,d=c.desktopCoreLoginContext.getDeviceAppTypeString,p=c.i18n,f=c.login,h=c.onLoginWithMfa,g=c.onLoginWithSuspended,b=c.pageContext,w=c.showResponseMessageModal,v=c.showLoginRateLimited,m=c.socialSignupCallbacks,k={container:u,page:null==b?void 0:b.pageType},x=X(n);f({creds:x,loggingOptions:{loggingData:k,loginAttemptContextEvent:e.signupLoginContextEvent(7534)},isAccountSwitch:r}).then((function(t){var n,o,l=null==t||null===(n=t.resource_response)||void 0===n||null===(o=n.data)||void 0===o?void 0:o.user;r&&l&&(0,i.Z)(l,"facebook",u),(0,E.My)("login.facebook."+d()),w?w(!0):_.ZP.handleRedirect(e.props.nextUrlParam||_.ZP.defaultSocialLoginRedirectUrl()),null==a||a(),s("m10n_measurement_pinterest_tag_us").anyEnabled&&(0,y.Z)()}),(function(t){var i;t.api_error_code===L.Zn?(null==l||l(!1),(0,E.My)("login.facebook."+d()),null==h||h(x,{phoneNumberEnd:null===(i=t.data)||void 0===i?void 0:i.phone_number_end})):t.api_error_code===L.xN||t.api_error_code===L.lg?"ACCOUNT_RECOVERY"===m.type?m.switchToAccountRecoverySignupFlow("facebook"):e.registerWithFacebook({facebookConnectData:n,loggingData:k,isFromStatusChange:o,switchToSocialSignupWithAgeFlow:m.switchToSocialSignupWithAgeFlow}):[L.ik].includes(t.api_error_code)?null==v||v():(t.api_error_code&&(0,E.My)("facebook_button.failed_login_".concat(t.api_error_code)),t.api_error_code===L.an&&g?g():(0,C.x)(p._('Sorry, we can\'t log you in.', 'error message when user failed to login caused by suspend/deactivated etc.', 'error message when user failed to login caused by suspend/deactivated etc.')))}))})),K(G(e),"statusChangeCallback",(function(t){var n,o;null===(n=(o=e.props).onClick)||void 0===n||n.call(o);var i,r=e.props,a=r.connectErrorMessage,l=r.handlePostSuccessConnect,c=r.isAccountSwitch,s=r.loadingIndicatorCallback;if("connected"===t.status){var u=t.authResponse;(0,E.My)("web.facebook_connect_button.login_status.connected"),null==s||s(!0),e.loginWithFacebook({facebookConnectData:{type:"ACCESS_TOKEN",id:u.userID,access_token:u.accessToken},isFromStatusChange:!0,isAccountSwitch:c,handlePostSuccessConnect:l,loadingIndicatorCallback:s}),i="success"}else"not_authorized"===t.status?((0,E.My)("web.facebook_connect_button.cancel.not_authorized"),(0,C.x)(a),i="not_authorized"):((0,E.My)("web.facebook_connect_button.cancel.unknown"),(0,C.x)(a),i="other_error");var d=e.props.handlePostConnectClick;null==d||d(i)})),K(G(e),"showDefaultError",(function(){var t=e.props,n=t.i18n,o=t.loadingIndicatorCallback;null==o||o(!1),(0,C.x)(n._('Email required for registration.', ' - ', ' -- '))})),K(G(e),"registerWithFacebook",function(){var t=T(regeneratorRuntime.mark((function t(n){var o,i,r,a,l,c,u,d,p,f,h,b,w,y,v,m,k,C,P;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=n.facebookConnectData,i=n.loggingData,r=n.isFromStatusChange,a=n.switchToSocialSignupWithAgeFlow,l=e.props,c=l.desktopCoreLoginContext.register,u=l.disablePostSignupNextUrl,d=l.loadingIndicatorCallback,p=l.nextUrlParam,f=l.onFBMissingEmail,h=l.onFBPhoneOnlyConnectVerified,b=l.showResponseMessageModal,w=l.showSignupWelcomeLoadingFn,y=function(){e.showDefaultError(),r||(e.rerequestFacebookEmail=!0)},v=null,"PROFILE"!==o.type){t.next=8;break}v=z({},o.profile),t.next=17;break;case 8:return t.prev=8,t.next=11,(0,j.MI)(o.access_token);case 11:v=t.sent,t.next=17;break;case 14:t.prev=14,t.t0=t.catch(8),y();case 17:if(v){t.next=19;break}return t.abrupt("return");case 19:if(m=(0,s.Z)(v),k={type:"facebook",context:i,signupOptions:m},v.email){t.next=24;break}return h?(r||null==d||d(!1),h(k)):r&&f?f(k):y(),t.abrupt("return");case 24:if(C={birthday_source_site:x.E_.FACEBOOK,email_source_site:x.E_.FACEBOOK},r){t.next=28;break}return a(k),t.abrupt("return");case 28:if(void 0!==(P=m.birthday)&&(0,g.Z)(P)){t.next=33;break}return null==d||d(!1),a(z(z({},k),{},{signupOptions:z(z({},k.signupOptions),{},{email_source_site:x.E_.FACEBOOK})})),t.abrupt("return");case 33:return b||null==w||w(!0),t.prev=34,t.next=37,c(z(z(z({},m),C),{},{birthday:P}),{signupContext:i,signupAttemptContextEvent:e.signupLoginContextEvent(7537)});case 37:t.next=42;break;case 39:t.prev=39,t.t1=t.catch(34),y();case 42:b?b(!0):_.ZP.handleSignupRedirect(r?p:p||window.location.pathname,u);case 43:case"end":return t.stop()}}),t,null,[[8,14],[34,39]])})));return function(e){return t.apply(this,arguments)}}()),e}return t=f,(n=[{key:"componentDidMount",value:function(){var e=this;if(!this.props.webFacebookDisabled){"undefined"!=typeof window&&(window.statusChangeCallback=this.statusChangeCallback,window.checkLoginState=function(){return e.checkLoginState()},window.fbConnectButtonContainerStack?window.fbConnectButtonContainerStack.push(this.props.container):window.fbConnectButtonContainerStack=[this.props.container],window.nextUrlParam=this.props.nextUrlParam,window.fbButtonMounted=window.fbButtonMounted?window.fbButtonMounted+1:1);var t,n,o,i,r=this.props.requestContext.userAgent.platform;if(["ios","ipad"].includes(r))if(window.fb_init!==l.Z.STARTED&&window.fb_init!==l.Z.FINISHED)this.initializeFB();else if(window.fb_init===l.Z.FINISHED&&window.FB.XFBML)window.FB.XFBML.parse();else var a=setInterval((function(){window.fb_init===l.Z.FINISHED&&window.FB.XFBML&&(window.FB.XFBML.parse(),clearInterval(a))}),100);else setTimeout((function(){window.__branchRedirectToStore||!window.__branchPinterestStarted?e.initializeFB():window.onbeforeunload=function(){window.__branchRedirectToStore&&e.initializeFB()}}),50);this.props.isRerequest&&(null===(t=(n=this.props).loadingIndicatorCallback)||void 0===t||t.call(n,!1),null===(o=(i=this.props).showSignupWelcomeLoadingFn)||void 0===o||o.call(i,!1))}}},{key:"componentDidUpdate",value:function(){window.nextUrlParam=this.props.nextUrlParam}},{key:"componentWillUnmount",value:function(){if("undefined"!=typeof window){if(window.fbButtonMounted-=1,window.fbConnectButtonContainerStack){var e=window.fbConnectButtonContainerStack.indexOf(this.props.container);e>=0&&window.fbConnectButtonContainerStack.splice(e,1)}0===window.fbButtonMounted&&(delete window.statusChangeCallback,delete window.checkLoginState,delete window.nextUrlParam)}}},{key:"initializeFB",value:function(){var e=this.props.requestContext.locale;null!==this.profilePicButton&&(void 0!==window.FB&&null!==window.FB?window.FB.XFBML.parse():(window.fbAsyncInit=function(){return(0,j.sl)()},function(t,n,o){var i=t.getElementsByTagName(n)[0];if(!t.getElementById(o)){var r=t.createElement(n);r.id=o,r.src=(0,c.Z)(e),i&&i.parentNode&&i.parentNode.insertBefore(r,i)}}(document,"script","facebook-jssdk")))}},{key:"checkLoginState",value:function(){window.FB.getLoginStatus((function(e){this.statusChangeCallback&&this.statusChangeCallback(e)}))}},{key:"signupLoginContextEvent",value:function(e){var t=this.props.desktopCoreLoginContext.viewer;return{event_type:e,aux_data:z(z({},(0,k.Z)(t.type)),{},{signup_login_method:b.Z.FACEBOOK})}}},{key:"renderProfilePicButtonWithFallback",value:function(){var e=this,t=this.props,n=t.i18n,o=t.isRerequest,i=t.showFallback;return(0,d.jsxs)(u.xu,{"data-test-id":"facebook-connect-button",ref:function(t){e._fallbackButton=t},children:[(0,d.jsx)(r.Z,{onClick:function(){var t,n=e.props,o=n.connectErrorMessage,i=n.desktopCoreLoginContext.getDeviceAppTypeString,r=n.i18n,a=n.webFacebookDisabled,l=n.viewer;if(a)e.setState({showModal:!0});else{(0,E.My)("fallback_facebook_button.click"),(0,E.NC)("press_facebook_login_fallback"),(0,E.My)("unauth_web.facebook_connect.manual.attempt"),(0,E.My)("unauth_web.social_connect.facebook.".concat(i())),null===(t=e.unsubscribeThisButton)||void 0===t||t.call(e);var c=O({onSuccess:function(t){(0,E.My)("unauth_web.facebook_connect.manual.success"),e.loginWithFacebook({facebookConnectData:t,isFromStatusChange:!1})},onError:function(e){(0,E.My)("unauth_web.facebook_connect.manual.failure"),(0,C.x)("POPUP_DISABLED"===e?r._('You must enable popups!', ' - ', ' -- '):o)},onEventReceived:function(){var t;null===(t=e.unsubscribeThisButton)||void 0===t||t.call(e)},rerequestFacebookEmail:e.rerequestFacebookEmail,viewer:l}).unsubscribe;e.unsubscribeThisButton=function(){c(),e.unsubscribeThisButton=null}}},styleOverrides:{backgroundClip:"padding-box",backgroundColor:"#1877F2",display:"block",fontWeight:"normal",height:"40px",marginTop:"0px",padding:"0px 0px 0px 8px",position:i?"relative":"absolute",textAlign:"left",transition:"opacity .2s linear",width:"100%",borderRadius:"20px"},tabIndex:-1,children:(0,d.jsxs)(u.kC,{alignItems:"stretch",justifyContent:"start",children:[(0,d.jsx)(u.xu,{color:"default",rounding:"circle",marginStart:1,dangerouslySetInlineStyle:{__style:{paddingTop:4,paddingBottom:3,paddingRight:3,paddingLeft:3}},height:24,width:24,children:(0,d.jsx)(u.JO,{accessibilityLabel:n._('facebook', 'accessible label for facebook icon', 'accessible label for facebook icon'),color:"shopping",icon:"facebook",inline:!0,size:19})}),(0,d.jsx)("span",{style:{color:"#fff",display:"inline-block",fontFamily:a.Z,fontSize:"16px",fontWeight:"bold",letterSpacing:"0.1px",lineHeight:"15px",marginRight:"24px",marginLeft:"15px",paddingTop:"4px",textAlign:"center",verticalAlign:"text-bottom",WebkitFontSmoothing:"auto",whiteSpace:"normal",width:"88%"},children:n._('Continue with Facebook', ' - ', ' -- ')})]})}),!i&&(0,d.jsx)(u.xu,{height:40,dangerouslySetInlineStyle:{__style:{textAlign:"left"}},ref:function(t){e.profilePicButton=t},children:(0,d.jsx)("div",{className:"fb-login-button","data-auth-type":o?"rerequest":void 0,"data-button-type":"continue_with","data-layout":"rounded","data-onlogin":"checkLoginState","data-scope":j.$.join(","),"data-size":"large","data-use-continue-as":"true","data-width":"268px"})})]})}},{key:"render",value:function(){var e=this,t=this.props.tooltip;return(0,d.jsxs)("div",{style:{position:"relative"},children:[this.renderProfilePicButtonWithFallback(),!!t&&(0,d.jsx)(h,{anchor:this._fallbackButton,message:t}),this.state.showModal&&(0,d.jsx)(w.Z,{type:"facebook",onDismiss:function(){return e.setState({showModal:!1})}})]})}}])&&W(t.prototype,n),o&&W(t,o),f}(o.Component);function $(e){var t=(0,A.ZP)(),n=(0,B.B)(),o=(0,F.B$)(),i=(0,D.lO)(),r=(0,P.F)().checkExperiment,a=r("web_facebook_disabled").anyEnabled,l=(0,m.Z)();return(0,d.jsx)(Y,z(z({},e),{},{connectErrorMessage:t._('Couldn\'t connect. You must authorize Pinterest.', ' - ', ' -- '),desktopCoreLoginContext:o,i18n:t,login:(0,v.Z)(),requestContext:n,pageContext:i,webFacebookDisabled:a,viewer:l,checkExperiment:r}))}},611683:function(e,t,n){n.d(t,{Z:function(){return D}});var o=n(76911),i=n(379913),r=n(711781),a=n(803491),l=n(472644),c=n(174382),s=n(640672),u=n(898781),d=n(908390),p=n(515198);function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var o,i,r=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(o=n.next()).done)&&(r.push(o.value),!t||r.length!==t);a=!0);}catch(c){l=!0,i=c}finally{try{a||null==n.return||n.return()}finally{if(l)throw i}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function g(e){var t=(0,u.ZP)(),n=e.tooltip,i=f((0,o.useState)(),2),r=i[0],h=i[1];return(0,p.jsxs)(d.xu,{"data-test-id":"google-connect-button",position:"relative",children:[(0,p.jsx)(a.Z,{onClick:function(){return h(!0)},type:"button",styleOverrides:{width:"100%",borderRadius:"20px",border:"0px solid"},children:(0,p.jsxs)(d.kC,{alignItems:"center",justifyContent:"center",children:[(0,p.jsx)(d.xu,{height:24,width:24,marginTop:1,children:(0,p.jsx)(l.Z,{size:20})}),(0,p.jsx)(d.xu,{marginStart:2,children:(0,p.jsx)(d.xv,{weight:"bold",children:t._('Connect with Google', 'googleConnectButtonWithDisabledSDK.buttonText', 'Connect with Google button text')})})]})}),!!n&&(0,p.jsx)(d.xu,{position:"absolute",dangerouslySetInlineStyle:{__style:{top:"12px",left:"100%"}},children:(0,p.jsx)(s.Z,{message:n})}),r&&(0,p.jsx)(c.Z,{type:"google",onDismiss:function(){return h(!1)}})]})}var _=n(290148),b=n(830269),w=n(70212),y=n(85334),v=n(829407),m=n(901656),k=n(905171),x=n(233211),C=n(773285),P=n(524172),S=n(903095),O=n(83969),A=n(584595);function j(e,t,n,o,i,r,a){try{var l=e[r](a),c=l.value}catch(s){return void n(s)}l.done?t(c):Promise.resolve(c).then(o,i)}function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){L(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function L(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var B=function(e){var t=e.container,n=e.isAccountSwitch,a=e.nextUrlParam,l=e.onLoginWithMfa,c=e.onLoginWithSuspended,f=e.onLoginWithVoluntarilyDeactivated,h=e.showResponseMessageModal,g=e.socialSignupCallbacks,E=e.tooltip,L=e.showLoginRateLimited,B=e.onClick,D=(0,x.B$)().viewer.type,R=(0,y.Z)(),Z=(0,S.lO)(),z=(0,u.ZP)(),M=(0,C.F)().checkExperiment,T=(0,P.M)(),I=(0,o.useRef)(null);return(0,v.Z)((function(){return window.googleConnectButtonContainer=t||"",function(){delete window.googleConnectButtonContainer}})),(0,v.Z)((function(){var e=function(e){var o=e.credential,s=e.select_by,u=(0,O.mK)((0,O.PL)(s));R({creds:{google_open_id_token:o},loggingOptions:{loggingData:{container:window.googleConnectButtonContainer,page:null==Z?void 0:Z.pageType,trigger:u},loginAttemptContextEvent:{event_type:7534,element:12981,aux_data:F(F({},(0,m.Z)(D)),{},{signup_login_method:b.Z.GPLUS})}},isAccountSwitch:n}).then((function(e){var o,r,l=null==e||null===(o=e.resource_response)||void 0===o||null===(r=o.data)||void 0===r?void 0:r.user;n&&l&&(0,i.Z)(l,"google",t),h?h(!1):_.ZP.handleRedirect(a||_.ZP.defaultSocialLoginRedirectUrl()),M("m10n_measurement_pinterest_tag_us").anyEnabled&&(0,w.Z)()}),(function(e){switch(A.ik.includes(e.api_error_code)&&(null==L||L()),e.api_error_code){case A.E6:null==f||f(e.message);break;case A.Zn:var t;null==l||l({google_open_id_token:o},{phoneNumberEnd:null===(t=e.data)||void 0===t?void 0:t.phone_number_end});break;case A.xN:if("ACCOUNT_RECOVERY"===g.type)g.switchToAccountRecoverySignupFlow("google");else{var n=(0,r.Z)(o),i={container:window.googleConnectButtonContainer,page:null==Z?void 0:Z.pageType,trigger:u},a={type:"google",google_open_id_token:o,first_name:n.given_name,last_name:n.family_name,image_url:n.picture};g.switchToSocialSignupWithAgeFlow({type:"google",context:i,signupOptions:F({},a)})}break;default:e.api_error_code===A.an&&c?c():(0,k.x)(z._('Sorry, we can\'t log you in.', 'error message when user failed to login caused by suspend/deactivated etc.', 'error message when user failed to login caused by suspend/deactivated etc.'))}}))};return function(){var t,n=(t=regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,null==T?void 0:T.ensureInit("button",e);case 2:(0,O.ru)({buttonRef:I,isDesktop:!0});case 3:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(o,i){var r=t.apply(e,n);function a(e){j(r,o,i,a,l,"next",e)}function l(e){j(r,o,i,a,l,"throw",e)}a(void 0)}))});return function(){return n.apply(this,arguments)}}()(),function(){null==T||T.removeButtonCallback(e)}})),(0,p.jsxs)(d.xu,{"data-test-id":"google-connect-button",position:"relative",children:[(0,p.jsx)(d.xu,{height:44,children:(0,p.jsx)("div",{ref:I,style:{position:"absolute",width:"100%"},onClick:function(){null==B||B()}})}),!!E&&(0,p.jsx)(d.xu,{position:"absolute",dangerouslySetInlineStyle:{__style:{top:"12px",left:"100%"}},children:(0,p.jsx)(s.Z,{message:E})})]})};function D(e){return(0,(0,C.F)().checkExperiment)("web_google_disabled").anyEnabled?(0,p.jsx)(g,{tooltip:e.tooltip}):(0,p.jsx)(B,F({},e))}},174382:function(e,t,n){n.d(t,{Z:function(){return l}});var o=n(121151),i=n(898781),r=n(908390),a=n(515198);function l(e){var t=e.type,n=e.onDismiss,l=(0,i.ZP)(),c="facebook"===t?l._('Oops! Facebook isn\'t available', 'socialAuthDisabled.facebook.title', 'Title for the modal shown when Facebook services are not working'):l._('Oops! Google isn\'t available', 'socialAuthDisabled.google.title', 'Title for the modal shown when Google services are not working'),s="facebook"===t?l._('Looks like Facebook isn\'t available right now.\n\nGive another option a try or refresh the page and try again later.', 'socialAuthDisabled.facebook.description', 'Description for the modal shown when Facebook services are not working'):l._('Looks like Google isn\'t available right now.\n\nGive another option a try or refresh the page and try again later.', 'socialAuthDisabled.google.description', 'Description for the modal shown when Google services are not working');return(0,a.jsx)(o.ZP,{accessibilityModalLabel:c,footer:(0,a.jsx)(r.kC,{alignItems:"center",justifyContent:"center",children:(0,a.jsx)(r.xu,{paddingX:1,children:(0,a.jsx)(r.zx,{color:"red",onClick:n,text:l._('OK', 'socialAuthDisabled.okButton', 'Button that closes modal shown when Facebook or Google services are not working'),size:"md"})})}),heading:c,onDismiss:n,children:(0,a.jsx)(r.xu,{paddingX:5,children:(0,a.jsx)(r.xv,{align:"center",children:s})})})}},910702:function(e,t,n){var o=n(816068);t.Z=function(e){return{type:"facebook",first_name:e.first_name,last_name:e.last_name,email:e.email,gender:e.gender,image_url:e.picture&&!e.picture.data.is_silhouette?e.picture.data.url:void 0,facebook_id:e.id,facebook_token:e.access_token,birthday:e.birthday?(0,o.Z)(e.birthday):void 0}}},70212:function(e,t,n){var o=n(214494);function i(e,t,n,o,i,r,a){try{var l=e[r](a),c=l.value}catch(s){return void n(s)}l.done?t(c):Promise.resolve(c).then(o,i)}var r=function(){var e,t=(e=regeneratorRuntime.mark((function e(){var t,n,i,r,a,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.Z.create("ApiResource",{url:"/v3/users/me/"}).callGet();case 3:a=e.sent,l=(null===(t=a.resource_response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.email)||(null===(i=((null===(r=a.resource_response)||void 0===r?void 0:r.client_context)||Object.freeze({})).user)||void 0===i?void 0:i.email),"undefined"!=typeof window&&window.pintrk("track","custom",{lead_type:"Pinterest Login",em:l}),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})),function(){var t=this,n=arguments;return new Promise((function(o,r){var a=e.apply(t,n);function l(e){i(a,o,r,l,c,"next",e)}function c(e){i(a,o,r,l,c,"throw",e)}l(void 0)}))});return function(){return t.apply(this,arguments)}}();t.Z=r},901656:function(e,t,n){var o=n(432300);t.Z=function(e){return"UNAUTH"===e?Object.freeze({}):{login_state:"LIMITED_LOGIN"===e?o.Z.LIMITED:o.Z.DEFAULT}}},336882:function(e,t){t.Z={STARTED:1,FINISHED:2}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/95923-a2a5c0079a8bf132.js.map